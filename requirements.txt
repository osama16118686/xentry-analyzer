pyTelegramBotAPI==4.12.0
httpx==0.27.0
@bot.message_handler(commands=['report'])
def report(message):
    from analyzer import scheduler
    if not scheduler.last_analysis_results:
        bot.reply_to(message, "â„¹ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ ØªØ­Ù„ÙŠÙ„ Ù…Ø­ÙÙˆØ¸Ø© Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†.")
        return

    msg = "ğŸ“ˆ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø®ÙŠØ±:\n\n"
    rare = []
    medium = []

    for coin, count in scheduler.last_analysis_results.items():
        if count == 3:
            rare.append(f"- {coin} âœ…âœ…âœ…")
        elif count == 2:
            medium.append(f"- {coin} âœ…âœ…")

    if rare:
        msg += "ğŸ”¥ ÙØ±Øµ Ù†Ø§Ø¯Ø±Ø© (3 Ø´Ø±ÙˆØ·):\n" + "\n".join(rare) + "\n\n"
    if medium:
        msg += "âœ… ÙØ±Øµ Ù…ØªÙˆØ³Ø·Ø© (2 Ø´Ø±ÙˆØ·):\n" + "\n".join(medium) + "\n\n"

    msg += "âš ï¸ Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ù„Ù… ØªØªØ­Ù‚Ù‚ ÙÙŠÙ‡Ø§ Ø§Ù„Ø´Ø±ÙˆØ·."
    bot.reply_to(message, msg)
